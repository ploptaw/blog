function setupHandlers(){let t=document.getElementById("input-text"),e=document.getElementById("input-unicode"),n=document.getElementById("section-text"),u=document.getElementById("output"),a=document.getElementById("output-unicode"),d=document.getElementById("result");setupPlaceholder([t,e,n]),setupEnterHandlers([{textarea:t,buttonClass:".convert-button"},{textarea:e,buttonClass:".reverse-button"},{textarea:n,buttonClass:".convert-andbutton"}]),setupButtonHandlers([{buttonClass:".convert-button",handler:()=>updateOutput(u,escapeText(t.value),!0)},{buttonClass:".reverse-button",handler:()=>updateOutput(a,unescapeText(e.value),!0)},{buttonClass:".convert-andbutton",handler:()=>updateOutput(d,n.value.replace(/§/g,"&"),!0)}])}function setupPlaceholder(t){t.forEach(t=>{t.addEventListener("focus",()=>{t.placeholder=""}),t.addEventListener("blur",()=>{t.value||(t.placeholder="ここに入力してください")})})}function setupEnterHandlers(t){t.forEach(({textarea:t,buttonClass:e})=>{t.addEventListener("keydown",t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),document.querySelector(e).click())})})}function setupButtonHandlers(t){t.forEach(({buttonClass:t,handler:e})=>{document.querySelector(t).addEventListener("click",e)})}function updateOutput(t,e,n=!1){var u;2e3<e.length?t.textContent="エラー: 変換できる文字数は2000文字までです。":(t.textContent="",u=document.createElement("p"),t.appendChild(u),(u=document.createElement("textarea")).value=e,u.classList.add("input"),t.appendChild(u),n&&((u=createButton("コピー",()=>navigator.clipboard.writeText(e))).classList.add("button"),t.appendChild(u)),(n=createButton("クリア",()=>t.textContent="")).classList.add("button"),t.appendChild(n))}function createButton(t,e){var n=document.createElement("button");return n.textContent=t,n.addEventListener("click",e),n}function escapeText(t){return t.replace(/[^\x00-\x7F]/g,t=>"\\u"+t.charCodeAt(0).toString(16).padStart(4,"0"))}function unescapeText(t){return t.replace(/\\u([\da-fA-F]{4})/g,(t,e)=>String.fromCharCode(parseInt(e,16)))}document.addEventListener("DOMContentLoaded",setupHandlers);