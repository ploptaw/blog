import {parseHTML as $5XW1j$parseHTML} from "linkedom";
import $5XW1j$11tyeleventycacheassets from "@11ty/eleventy-cache-assets";
import $5XW1j$prismjs from "prismjs";
import $5XW1j$prismjscomponents from "prismjs/components/";

var $b48c363e7e81a660$exports = {};




const $1f15c690e61bc826$var$DEFAULT_URL_THEME = 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism-tomorrow.min.css';
const $1f15c690e61bc826$export$1537643e85439bf5 = async (content, url = $1f15c690e61bc826$var$DEFAULT_URL_THEME)=>{
    const { document: document  } = $5XW1j$parseHTML(content);
    const head = document.getElementsByTagName('head')[0];
    const codedSections = [
        ...document.querySelectorAll('pre > code')
    ];
    if (codedSections.length > 0) {
        const css = await $5XW1j$11tyeleventycacheassets(url, {
            duration: '1h',
            type: 'text'
        });
        const inline = document.createElement('style');
        const inlinStyle = document.createTextNode(`/*! purgecss start ignore */ ${css} /*! purgecss end ignore */`);
        inline.appendChild(inlinStyle);
        head.appendChild(inline);
        codedSections.map((section)=>{
            const languages = [];
            const language = section.className.split('-')[1];
            if (language) {
                languages.push(language);
                $5XW1j$prismjscomponents(languages);
                const code = section.innerHTML;
                const html = $5XW1j$prismjs.highlight(code, $5XW1j$prismjs.languages[language], language);
                section.innerHTML = html;
                const pre = section.parentElement;
                pre.className = `${pre.className} language-${language}`;
                return section;
            }
        });
        content = document.toString();
    }
    return content;
};


$b48c363e7e81a660$exports = (eleventyConfig, options)=>{
    eleventyConfig.namespace('sardine-', ()=>{
        eleventyConfig.addTransform('code-highlighter', async (content, outputPath)=>{
            try {
                if (outputPath && outputPath.endsWith('.html')) content = await $1f15c690e61bc826$export$1537643e85439bf5(content, options === null || options === void 0 ? void 0 : options.urlTheme);
            } catch (error) {
                console.error(error);
            }
            return content;
        });
    });
};


export {$b48c363e7e81a660$exports as default};
//# sourceMappingURL=index.mjs.map
